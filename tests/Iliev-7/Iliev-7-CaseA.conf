# Logger
unicode_plotting = enable
projection_axis = z
pseudocolor_layer = 64
colormap = rainbow

# Report
report_pseudocolor = rho
report_histogram = rho
report_histogram = temp
report_histogram = e_tot
report_histogram = ntr_frac_0
report_frequency = 10

# Initial Condition
ic_type = simple
ic_grid = 128 128 128
ic_box_lengths = 6.6 6.6 6.6 'kpc'
ic_redshift = 0.0

# AMR
ic_nlevels = 1
max_nboxes = 1

# Internal Units
density_unit = "m_H / cm^3"
length_unit = "Mpc"
time_unit = "Myr"

# Boundary Conditions
left_bc = outflow
right_bc = outflow
bottom_bc = outflow
top_bc = outflow
back_bc = outflow
front_bc = outflow

# Thermodynamics
ideal_gas_type = monatomic

# Exact Riemann Solver
vacuum_pressure = 0d0  # cm^-3 Mpc^2 Myr^-2
vacuum_density = 0d0  # cm^-3
tolerance = 1.d-8
n_iteration = 10000

# Slope Limiter
slope_limiter = van_leer
slope_limiter_omega = 0d0

# Chemistry
elements = H He
element_abundances = 1.0 0.0

# Ionisation Equilibrium
uvb_equilibrium = disable
uvb_model = HM12
uvb_self_shielding = disable
collisional_ionization_equilibrium = enable
photoionization_equilibrium = disable
ie_convergence_rate = 0.001
ie_max_niterations = 10000
species_cases = case_a case_a case_a
equilibrium_table_size = 1024 1024
equilibrium_table_temp_range = 1d1 1d5 K
equilibrium_table_density_range = 1d-4 1d-1 "m_H / cm^3"

# MUSCL-Hancock solver
solver_type = memory_intensive


# Drawing
canvas = uniform 2d-4 0d0 0d0 0d0 1.389585607d-14 8000 0 0 0
shape = sphere 5.d0 3.3 3.3 0.8 5d-2 'kpc'
shape_filling = uniform absolute 4d-2 0d0 0d0 0d0 1.389585607d-14 40 1 1 0 2d-4 0d0 0d0 0d0 1.389585607d-14 8000 0 0 0

# Sanity Check
sanity_check = enable
sanity_check_frequency = 1
sanity_check_rho = enable 2d-4 4d-2 "m_H / cm^3"
sanity_check_temp = enable 40 8000 "K"
sanity_check_ntr_frac_0 = enable 0 1
sanity_check_total_mass = enable 0.9 1.1
sanity_check_total_energy = enable 0.9 1.1

# Stabilizer
stabilizer = disable

# Chombo Output
chombo_prefix = "./Iliev-7-CaseA"
chombo_nickname = 'Iliev-7-CaseA'
chombo_output_restart_backup_every = 10
chombo_output_rule  = linear 0.0 80.0 81
chombo_output_final_time = 76

# species
NSpecies = 1

# general
ActualRun = .true.
VersionID = iliev-7

# initial evolution
DoInitEvol = .false.
InitCollEq = .false.

# light speed params
LightSpeedLimit = .false.

# Recombination
CaseA = .ture.
ClumpingFactor = 1

# UVB
InitUVBEq = .false.
UVB_SS = .false.
KeepBKG = .false.

# log
Verbosity = 3

# timestep
TimeStepFact = 0.05
InitialSimTime = 0.0
SimulationTime = 80 # Myr

# cosmology
OmegaBaryonNow = 0.0486
OmegaCDMNow = 0.3075
OmegaLambdaNow = 0.6910098315260953
HubbleConstNow = 67.74  # km / s / Mpc
InitialRedshift = 0.0

# ic
InitHIIradius = 11.2  # box size
SafetyDist = 11  # box size

# Heating & Cooling mechanisms
IncludeCollIon = 1
IncludeCollExc = 1
IncludeHubbleCool = 0
IncludeComptCool = 0
IncludeQSOComptHeat = .false.

# Single source
NSources = 1
SourceCoords = -10.0001, 0.5001, 0.5001
SpectrumType = 2
BlackBodyTemp = 1d5
TotalIonRate = 53.78051831433521
OpAngle = 0.0
NSpectralRegions = 3
LinearSpcBins = .true.
NSpectralBins = 10 10 50
MinMaxEnergy = 1 1.8 1.8 4 4 100

# Ray tracing
NRays = 5
MaxTau = 50 50 50
